var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{d as n,z as A,r as i,b as u,c,w as d,e as f,f as m,u as g,E as p,G as b,i as v,j as y,H as I,y as Q,I as h,_ as x,m as D,t as C,J as B,K as E,C as V,D as w,L as N,k}from"./index-6e705c16.js";import{h as P}from"./http.2c593a47.js";import{_ as j}from"./fly-content.vue_vue_type_script_setup_true_lang.e3b08d19.js";const H="data:image/png;base64,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",X=x(n({__name:"fly-login",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:a}){const l=a,t=A(),s=i(H),r=i(""),o=()=>{l("update:modelValue",!1)},n=e=>{const{avatarUrl:a}=e.detail;s.value=a},x=e=>{const{value:a}=e.detail;r.value=a},D=()=>{s.value!==H?r.value?(l("update:modelValue",!1),t.setUserInfo({nickname:r.value,avatar:s.value})):b({title:"请填写昵称",icon:"none"}):b({title:"请选择头像",icon:"none"})};return(e,a)=>{const l=v,t=y,r=I,A=Q,i=h;return e.modelValue?(u(),c(l,{key:0,class:"fly-login"},{default:d((()=>[f(l,{class:"fly-login-mask"}),f(l,{class:"fly-login-content px-4"},{default:d((()=>[f(l,{class:"font-bold h-16 leading-16"},{default:d((()=>[m("获取您的昵称、头像")])),_:1}),f(l,{class:"rounded-full bg-light-600 w-6 h-6 text-center absolute top-4 right-4",onClick:o},{default:d((()=>[f(l,{class:"i-carbon-close text-gray-700"})])),_:1}),f(l,{class:"flex items-center h-16 leading-16 border-b-gray-400 border-b-solid border-[1rpx]"},{default:d((()=>[f(t,{class:"mr-4 flex-shrink-0"},{default:d((()=>[m("头像")])),_:1}),f(A,{class:"bg-transparent flex items-center after:b-none w-full h-12 leading-12","open-type":"chooseAvatar",onChooseavatar:n},{default:d((()=>[f(r,{class:"w-8 h-8 rounded-full",src:g(s)},null,8,["src"]),f(t,{class:"ml-auto i-carbon-chevron-right"})])),_:1})])),_:1}),f(l,{class:"flex items-center h-16 leading-16 border-b-gray-400 border-b-solid border-1 mt-4"},{default:d((()=>[f(t,{class:"mr-4 flex-shrink-0"},{default:d((()=>[m("昵称")])),_:1}),f(i,{type:"nickname",placeholder:"请输入昵称",onChange:x,onBlur:x})])),_:1}),f(A,{size:"default",type:"default",style:{color:"#fff","background-color":"#1aad19","border-color":"#1aad19"},class:"text-center leading-12 w-40 my-4",onClick:D},{default:d((()=>[m(" 确定 ")])),_:1})])),_:1})])),_:1})):p("",!0)}}}),[["__scopeId","data-v-1367a9bb"]]),G=n({name:"WxLogin"}),U=n((R=((e,a)=>{for(var l in a||(a={}))s.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&o(e,l,a[l]);return e})({},G),a(R,l({setup(e){const a=i(!1),l=A(),t=D((()=>{var e;return null==(e=l.userInfo)?void 0:e.nickname})),s=()=>{E({title:"确认退出当前账号？",success:e=>{e.confirm&&l.clearUserInfo()}})};return(e,r)=>{const o=I,n=v,A=V(w("fly-login"),X),i=V(w("fly-content"),j),b=Q;return u(),c(n,{class:"p-4"},{default:d((()=>[g(t)?(u(),c(n,{key:0,class:"flex items-center leading-6"},{default:d((()=>{var e;return[f(o,{class:"w-8 h-8 rounded-full",src:null==(e=g(l).userInfo)?void 0:e.avatar},null,8,["src"]),f(n,{class:"ml-2"},{default:d((()=>{var e;return[m(C(null==(e=g(l).userInfo)?void 0:e.nickname),1)]})),_:1})]})),_:1})):(u(),c(n,{key:1,class:"flex items-center leading-6",onClick:r[0]||(r[0]=e=>a.value=!0)},{default:d((()=>[f(n,{class:"i-carbon-user-avatar"}),f(n,{class:"ml-2"},{default:d((()=>[m("点击显示微信头像")])),_:1})])),_:1})),f(A,{modelValue:g(a),"onUpdate:modelValue":r[1]||(r[1]=e=>B(a)?a.value=e:null)},null,8,["modelValue"]),f(i,{line:10}),g(t)?(u(),c(b,{key:2,class:"mt-2",onClick:s},{default:d((()=>[m("退出登录")])),_:1})):p("",!0)])),_:1})}}}))));var R;const F=n({__name:"index",setup(e){const a=A(),l=i("");return N({provider:"weixin",success:e=>{return t=this,s=[e],r=function*({code:e}){const t=yield P({method:"GET",url:"/weixin/jscode2session",data:{code:e}});l.value=t.data.openid,a.setUserInfo({openid:t.data.openid})},new Promise(((e,a)=>{var l=e=>{try{n(r.next(e))}catch(l){a(l)}},o=e=>{try{n(r.throw(e))}catch(l){a(l)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(l,o);n((r=r.apply(t,s)).next())}));var t,s,r}}),(e,a)=>{const t=v,s=k("layout-default-uni");return u(),c(s,null,{default:d((()=>[f(t,{class:"ml-4"},{default:d((()=>[m("wx的openid:")])),_:1}),f(t,{class:"ml-4"},{default:d((()=>[m(C(g(l)),1)])),_:1}),f(U)])),_:1})}}});export{F as default};
